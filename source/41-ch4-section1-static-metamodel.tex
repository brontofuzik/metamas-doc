%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Title (en): Multiagent Systems and Organizations                           %%
%% Title (cs): Multiagentní systémy a organizace                              %%
%%                                                                            %%
%% Author: Bc. Lukáš Kúdela                                                   %%
%% Supervisor: Prof. RNDr. Petr Štěpánek, DrSc.                               %%
%%                                                                            %%
%% Academic year: 2011/2012                                                   %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Static Metamodel}

The static Thespian metamodel is used to model static (structural) aspects of OCMAS like
\begin{itemize}
	\item an organization's role structure and protocols,
	\item a role's competences and responsibilities or
	\item a player's capabilities.
\end{itemize}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Organization Metamodel}

% Organization metamodel - usage
The Organization metamodel (figure~\ref{figure:thespian-organization-metamodel}) contains concepts whose instances model organizations and roles with their competences and responsibilities.

\subsubsection*{Organization and Organization Type}

% Type-token distinction - organization
To enable the type-token distinction, Thespian contains concepts for modelling both an \textit{organization type} and an \textit{organization token} -- \textit{Organization type} and \textit{Organization} respectively.

% Organization
\textit{Organization} (also called \textit{Organization instance}) is an actual organization in a running MAS; it is a run-time entity.
% Organization - state
It is classified by an \textit{Organization type} which specifies its role structure.
% Organization - note
Note that despite an organization being a run-time entity, it can be declared at design-time, created at MAS start-up and destroyed at MAS shut-down.

% Organization type
\textit{Organization type} (also called \textit{Organization class}) is a class (ALT: family) of organizations sharing the same role structure; it is a design-time entity.
% Organization type - state
It contains a set of \textit{Roles} defining its role structure.
% Organization type - behaviour
It can be instantiated to yield an \textit{Organization}. 

\subsubsection*{Role and Position}

% Type-token distinction - role
Thespian contains concepts for modelling both an \textit{role type} and \textit{role token} to enable the type-token distinction -- \textit{Role} and \textit{Position} respectively.

% Role
\textit{Role} is a role specification within an organization; it is a design-time entity.
% Role - state
It has a set of \textit{Competences} and a set of \textit{Responsibilities} defining its function in its containing \textit{Organization type} and multiplicity differentiating between a \textit{single role}) -- one that can not be played by more than one \textit{Player} in an \textit{Organization} -- and a \textit{multiple role} -- one that can.
Currently, neither Thespian not Thespian4Jade support differentiating between a \textit{mandatory role} -- one that has to be played at all times -- and an \textit{optional role} -- one that does not have to be.

% Position
A \textit{Position} (sometimes called \textit{Role instance}) is a role realization within an actual organization; it is a run-time entity.
% Position - state
It is a realization of \textit{Role} which specifies its competences
It belongs to an \textit{Organization} and is played by a \textit{Player}.
% Position - note
Note that a \textit{Position} it is usually not declared at design-time, it is created when an \textit{Player} starts playing a rule in an \textit{Organization} and destroyed when that \textit{Player} stops doing so (ALT: playing the \textit{Role} in the \textit{Organization}).

\subsubsection*{Competence and Responsibility}

Let us consider a player playing a role.
As a result of playing the role, the player gains competences a responsibilities associated with that role.

% Competence
\textit{Competence} is an operation a player playing a role \textit{can} can execute as a result of playing that role; it is a design-time entity.
% Competence - state
A \textit{Competence} can require an argument from a player after its invocation (but before its execution), in which case the argument type (a Java type) has to be specified.
Also it can provide a return value to the player after its execution, in which case the return value type (a Java type) has to be specified.

% Figure: Thespian organization metamodel
\begin{figure}[ht]
	\centering
	\includegraphics[width=\textwidth]{images/thespian/organization-metamodel.png}
	\caption{The Organization fragment of the Thespian metamodel}
	\label{figure:thespian-organization-metamodel}
\end{figure}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Player Metamodel}

% Player metamodel - usage
The Player metamodel (figure~\ref{figure:thespian-player-metamodel}) contains constructs for modelling players and their responsibilities.

\subsubsection*{Player and Player Type}

% Type-token distinction - player
To facilitate the type-token distinction, Thespian contains concepts for modelling both a \textit{player type} and a \textit{player token} -- \textit{Player type} and \textit{Player} respectively.

% Player
\textit{Player} is an actual player in a running MAS; it is a run-time entity.
% Player - state
It is classified by a player type which specifies its responsibilities.
% Player - note
Note that despite a player being a run-time entity, it has to be declared at design-time, created at MAS start-up and destroyed at MAS shut-down.

% Player type
\textit{Player type} (also called \textit{Player class})is a class (ALT: family) of players sharing the same characteristics, namely responsibilities; it is a design-time entity.
% Player type - state
It has a set of responsibilities defining its capabilities when playing a role.
% Player type - behaviour
It can be instantiated to yield a player. 

\subsubsection*{Responsibility}

% Responsibility
\textit{Responsibility}is an operation a player playing a role \textit{must} execute as a result of playing that role; it is a design-time entity. 
% Responsibility - state
A \textit{Responsibility} can provide an argument to a player after its invocation (but before its execution), in which case the argument type (a Java type) has to be specified.
Also it can request a return value from the player after its execution, in which case the return value type (a Java type) has to be specified.

% Figure: Thespian player metamodel
\begin{figure}[ht]
	\centering
	\includegraphics[width=\textwidth]{images/thespian/player-metamodel.png}
	\caption{The Player fragment of the Thespian metamodel}
	\label{figure:thespian-player-metamodel}
\end{figure}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Protocol Metamodel}

% Protocol metamodel - usage
The Protocol metamodel (figure~\ref{figure:thespian-protocol-metamodel}) contains abstractions whose instances represent interaction protocols between a player and an organization or role, and among roles themselves.

\subsubsection*{Protocol}

% Protocol
An \textit{Interaction protocol} is an institutionalized pattern of interaction (ALT: communication) between two or more roles within an organization; it is a design-time entity modelled by the \textsc{Protocol} class.
It defines parties involved in the interaction and messages exchanged in the communication.

% Scenario
A realization of an interaction (ALT: communication) protocol is an \textit{Interaction scenario} -- a sequence of actions performed (ALT: messages exchanged) by two or more roles within an organization; a scenario is a purely run-time entity.
In other words, a protocol is a framework and a scenario (is) one of its possible instantiations.
Since scenarios are usually not (explicitly?) modelled\footnote{Scenarios can be (explicitly?) modelled in snapshots.}, Thespian does not contain the concept of an \textit{Interaction scenario}.

% Type-token distinction - protocol
The theme of type-token distinction is at play here -- instances of \textit{Protocol} model \textit{protocol types} and instances of \textit{Scenario} represent \textit{protocol tokens}.

\subsubsection*{Party}

% Party - definition
A \textit{Party} is a role involved in a protocol; it is a design-time entity modelled by the \textsc{Party} abstract class.
A relationship between roles and protocols is a many-to-many one; a role can participate in multiple protocols and at least two different roles have to take part in a protocol; a party is a reification (embodiment) of this relationship.
% Initiator party & Responder party
A \textit{Party} is either an \textit{Initiator party} -- one that initiates the protocol -- or a \textit{Responder party} -- one that responds to the initiated protocol. These two concepts are modelled by two concrete classes: \textsc{InitiatorParty} and \textsl{ResponderParty} respectively.

\subsubsection*{Message}

A \textit{Message} is a piece of information exchanged between two parties in a protocol; it is a design-time entity modelled by the \textsc{Message} class.

% Figure: Thespian protocol metamodel
\begin{figure}[ht]
	\centering
	\includegraphics[width=\textwidth]{images/thespian/protocol-metamodel.png}
	\caption{The Protocol fragment of the Thespian metamodel}
	\label{figure:thespian-protocol-metamodel}
\end{figure}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Compile-Time Metamodel}	

% Design-time metamodel - usage
The Design-time metamodel contains concepts whose instances model the design-time MAS entities.
These entities, as their name suggests, are created and/or modified at design-time by the MAS designer, and they constitute the MAS specification (see this chapter's introduction).
The models of MAS specifications are also called \textit{static MAS models}.

% Figure: Thespian static metamodel
\begin{figure}[ht]
	\centering
	\includegraphics[width=\textwidth]{images/thespian/compile-time-metamodel.png}
	\caption{The static fragment of the Thespian metamodel}
	\label{figure:thespian-static-metamodel}
\end{figure}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Run-Time Metamodel}

% Run-time metamodel - usage
The Run-time metamodel contains constructs that model the run-time MAS entities.
These entities, as their name implies, are created and/or modified at run-time by the MAS itself, and they make up the MAS manifestation (see this chapter's introduction).
They models of MAS manifestations are also referred to as \textit{dynamic MAS models} or \textit{MAS snapshots}.

% Figure: Thespian dynamic metamodel
\begin{figure}[ht]
	\centering
	\includegraphics[width=\textwidth]{images/thespian/run-time-metamodel.png}
	\caption{The dynamic fragment of the Thespian metamodel}
	\label{figure:thespian-dynamic-metamodel}
\end{figure}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Integrated Metamodel}

Figure~\ref{figure:thespian-integrated-metamodel} shows the integrated Thespian metamodel.

% Key property of Thespian - no association between Role and Player type
We would like to emphasize what we perceive as key property of Thespian -- there is no association between \textit{Role} and \textit{Player type}, no link between a specific role and a particular player type.
This means that there is no design-time dependency between roles and player types; all connections arise at run-time and happen between positions and players.

% Figure: Thespian integrated metamodel
\begin{figure}[ht]
	\centering
	\includegraphics[width=\textwidth]{images/thespian/thespian-metamodel.png}
	\caption{The integrated Thespian metamodel}
	\label{figure:thespian-integrated-metamodel}
\end{figure}